# Лабораторная работа по СОА
## Вариант 5192

# Задание
Разработать спецификацию в формате OpenAPI для набора веб-сервисов, реализующего следующую функциональность:

Первый веб-сервис должен осуществлять управление коллекцией объектов. В коллекции необходимо хранить объекты класса Movie, описание которого приведено ниже:
```
public class Movie {
    private int id; //Значение поля должно быть больше 0, Значение этого поля должно быть уникальным, Значение этого поля должно генерироваться автоматически
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Coordinates coordinates; //Поле не может быть null
    private java.util.Date creationDate; //Поле не может быть null, Значение этого поля должно генерироваться автоматически
    private long oscarsCount; //Значение поля должно быть больше 0
    private int usaBoxOffice; //Значение поля должно быть больше 0
    private MovieGenre genre; //Поле может быть null
    private MpaaRating mpaaRating; //Поле может быть null
    private Person screenwriter;
}
public class Coordinates {
    private long x;
    private Long y; //Максимальное значение поля: 479, Поле не может быть null
}
public class Person {
    private String name; //Поле не может быть null, Строка не может быть пустой
    private Double height; //Поле может быть null, Значение поля должно быть больше 0
    private Color eyeColor; //Поле может быть null
    private Color hairColor; //Поле не может быть null
    private Country nationality; //Поле не может быть null
    private Location location; //Поле не может быть null
}
public class Location {
    private Double x; //Поле не может быть null
    private float y;
    private String name; //Поле не может быть null
}
public enum MovieGenre {
    WESTERN,
    MUSICAL,
    ADVENTURE,
    TRAGEDY;
}
public enum MpaaRating {
    G,
    PG,
    PG_13,
    NC_17;
}
public enum Color {
    GREEN,
    RED,
    BLACK,
    WHITE;
}
public enum Color {
    GREEN,
    YELLOW,
    ORANGE,
    WHITE,
    BROWN;
}
public enum Country {
    GERMANY,
    VATICAN,
    ITALY,
    SOUTH_KOREA,
    JAPAN;
}
```
Веб-сервис должен удовлетворять следующим требованиям:

1. API, реализуемый сервисом, должен соответствовать рекомендациям подхода RESTful.
2. Необходимо реализовать следующий базовый набор операций с объектами коллекции: добавление нового элемента, получение элемента по ИД, обновление элемента, удаление элемента, получение массива элементов.
3. Операция, выполняемая над объектом коллекции, должна определяться методом HTTP-запроса.
4. Операция получения массива элементов должна поддерживать возможность сортировки и фильтрации по любой комбинации полей класса, а также возможность постраничного вывода результатов выборки с указанием размера и порядкового номера выводимой страницы.
5. Все параметры, необходимые для выполнения операции, должны передаваться в URL запроса.
6. Информация об объектах коллекции должна передаваться в формате json.
7. В случае передачи сервису данных, нарушающих заданные на уровне класса ограничения целостности, сервис должен возвращать код ответа http, соответствующий произошедшей ошибке.

Помимо базового набора, веб-сервис должен поддерживать следующие операции над объектами коллекции:

1. Рассчитать сумму значений поля usaBoxOffice для всех объектов.
2. Вернуть количество объектов, значение поля screenwriter которых больше заданного.
3. Вернуть массив объектов, значение поля name которых содержит заданную подстроку.

Эти операции должны размещаться на отдельных URL.

Второй веб-сервис должен располагаться на URL /oscar, и реализовывать ряд дополнительных операций, связанных с вызовом API первого сервиса:

1. /screenwriters/get-loosers : получить список сценаристов, ни один фильм которых не получил ни одного "Оскара"
2. /directors/humiliate-by-genre/{genre} : отобрать все "Оскары" у всех фильмов режиссёров, снявших хоть один фильм в указанном жанре

Эти операции также должны размещаться на отдельных URL.

Для разработанной спецификации необходимо сгенерировать интерактивную веб-документацию с помощью Swagger UI. Документация должна содержать описание всех REST API обоих сервисов с текстовым описанием функциональности каждой операции. Созданную веб-документацию необходимо развернуть на сервере helios.

Вопросы к защите лабораторной работы:

1. Подходы к проектированию приложений. "Монолитная" и сервис-ориентированная архитектура.
2. Понятие сервиса. Общие свойства сервисов.
3. Основные принципы SOA. Подходы к реализации SOA, стандарты и протоколы.
4. Общие принципы построения и элементы сервис-ориентированных систем.
5. Понятие веб-сервиса. Определение, особенности, отличия от веб-приложений.
6. Категоризация веб-сервисов. RESTful и SOAP. Сходства и отличия, области применения.
7. RESTful веб-сервисы. Особенности подхода. Понятия ресурса, URI и полезной нагрузки (payload).
8. Виды RESTful-сервисов. Интерпретация методов HTTP в RESTful.
9. Правила именования ресурсов в RESTful сервисах.
10. Спецификация RESTful-сервисов. Стандарт OpenAPI.
11. Автодокументирование RESTful-сервисов. Swagger Editor, Swagger UI (и Swagger Codegen).
12. Архитектурный принцип HATEOAS.
